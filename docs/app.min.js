!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))}function t(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function o(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var a=function(e=window.location.href){var t={},n=e.indexOf("?");if(-1===n)return t;var r=e.slice(n+1);return""===r||r.split("&").map((e=>{let n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])})),t},i=function(){return parseInt(1e14*Math.random()).toString(36)+Date.now().toString(36)},s=function(e){var t=e.toLowerCase(),n=[];if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var r="#",o=1;o<4;o+=1)r+=t.slice(o,o+1).concat(t.slice(o,o+1));t=r}for(o=1;o<7;o+=2)n.push(parseInt("0x"+t.slice(o,o+2)));return n}if(/^(rgb\(|RGB\()[\s\S]+\)/.test(t))return(n=t.replace(/( |\(|\)|rgb|RGB)+/g,"").split(",")).map(Number)};new function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(n){var r,o,a,i,s,c,l,u="",f=0;for(n=t(n);f<n.length;)i=(r=n.charCodeAt(f++))>>2,s=(3&r)<<4|(o=n.charCodeAt(f++))>>4,c=(15&o)<<2|(a=n.charCodeAt(f++))>>6,l=63&a,isNaN(o)?c=l=64:isNaN(a)&&(l=64),u=u+e.charAt(i)+e.charAt(s)+e.charAt(c)+e.charAt(l);return u},this.decode=function(t){var r,o,a,i,s,c,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)r=e.indexOf(t.charAt(u++))<<2|(i=e.indexOf(t.charAt(u++)))>>4,o=(15&i)<<4|(s=e.indexOf(t.charAt(u++)))>>2,a=(3&s)<<6|(c=e.indexOf(t.charAt(u++))),l+=String.fromCharCode(r),64!=s&&(l+=String.fromCharCode(o)),64!=c&&(l+=String.fromCharCode(a));return n(l)};var t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},n=function(e){for(var t="",n=0,r=0,o=0,a=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a),n+=3);return t}};var c=i;var l={wait:500};function u(e){var t=l.wait,i=window.fetch;window.fetch=function(){console.log("arguments",arguments);var s=arguments[0],c=arguments[1]||{method:"get",body:null},l=c.method,u=c.body,f=s.split("?")[0],d=a(s);l=l.toUpperCase();var p=function(r){var o=e[r];if(o.type=(o.type||"get").toUpperCase(),r===f&&l===o.type){if(u)try{u=JSON.parse(u)}catch(e){u=a(u)}var i=o.response({params:d,type:l,url:f,data:u}),c={ok:!0,status:200,statusText:"OK",url:s,type:"basic",redirected:!1,headers:new Headers,text:function(){return new Promise((function(e){e(i)}))},json:function(){return new Promise((function(e){e(i)}))},clone:function(){return n({},c)}};return{value:new Promise((function(e){setTimeout((function(){e(c)}),t||0)}))}}};for(var h in e){var g=p(h);if("object"==typeof g)return g.value}return i.apply(void 0,o([],r(arguments),!1))},XMLHttpRequest.prototype.serviceOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var t=r(arguments,2),n=t[0],i=t[1],s=i.split("?")[0],c=a(i);for(var l in n=n.toUpperCase(),e){var u=e[l];if(u.type=(u.type||"get").toUpperCase(),l===s&&n===u.type){Object.defineProperty(this,"__SIMULATE_SERVICE_OBJECT__",{configurable:!0,value:{isService:!0,itemFunc:u.response,type:n,pathname:s,params:c}});break}}this.serviceOpen.apply(this,o([],r(arguments),!1))},XMLHttpRequest.prototype.serviceSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){var e=this,n=this.__SIMULATE_SERVICE_OBJECT__;if(n){var i=arguments[0],s=n.params,c=n.pathname,l=n.type,u=n.itemFunc;if(i)try{i=JSON.parse(i)}catch(e){i=a(i)}var f=u({params:s,type:l,url:c,data:i});Object.defineProperty(this,"responseText",{configurable:!0,value:f}),Object.defineProperty(this,"responseXML",{configurable:!0,value:f}),Object.defineProperty(this,"response",{configurable:!0,value:f}),Object.defineProperty(this,"status",{configurable:!0,value:200}),Object.defineProperty(this,"statusText",{configurable:!0,value:"OK"}),setTimeout((function(){e.dispatchEvent(new Event("load"))}),t||0)}else this.serviceSend.apply(this,o([],r(arguments),!1))}}u.getConfig=function(){return n({},l)},u.setConfig=function(e){Object.assign(l,e)};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var f={exports:{}};f.exports=function(){function e(e){let t=[];if(e instanceof Object)for(let n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}return{ajax:function(t){return new Promise((function(n,r){var o=new XMLHttpRequest;o.addEventListener("load",(e=>{if(t.getResponse){var a={},i=o.getAllResponseHeaders().split("\r\n");for(let e of i){let t=e.split(": ");t[0]&&(a[t[0]]=t[1])}t.getResponse(a)}var{status:s}=o;200==s?n(o.response):r({status:s,result:o,error:e})})),o.addEventListener("error",(e=>{r({status:o.status,result:o,error:e})})),o.addEventListener("timeout",(e=>{r({status:o.status,result:o,error:e})})),t.uploadProgress&&(o.upload.addEventListener("loadstart",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("progress",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("load",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("loadend",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("error",(e=>{t.uploadProgress(e)}))),t.downloadProgress&&(o.addEventListener("loadstart",(e=>{t.downloadProgress(e)})),o.addEventListener("progress",(e=>{t.downloadProgress(e)})),o.addEventListener("loadend",(e=>{t.downloadProgress(e)})));var a=t.method,{url:i,params:s={},data:c={},headers:l,timeout:u,responseType:f,withCredentials:d}=t,p=!1;a=a?a.toUpperCase():"GET",new Set(["GET","DELETE","HEAD","OPTIONS","TRACE"]).has(a)&&(p=!0),i+=function(t,n){if(!n)return"";var r=n instanceof Object?e(n):n;return-1!==t.indexOf("?")?"&"+r:"?"+r}(i,s),o.open(a,i,!0),void 0!==d&&(o.withCredentials=d),o.responseType=f||"json";for(let e in l)o.setRequestHeader(e,l[e]),e=e.toLowerCase();l&&l["content-type"]||"FormData"==c.constructor.name?l&&l["content-type"]&&-1!==l["content-type"].indexOf("application/json")&&c instanceof Object&&(c=JSON.stringify(c)):o.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8"),o.timeout=u||6e4,o.send(p?null:function(t){return t?"string"==typeof t||t instanceof FormData?t:e(t):null}(c))}))}}}();var d=f.exports;u({"/getData":{type:"post",response:function(e){return console.log("simulate",e),{code:200}}}});var p=function(e,t,n){if(void 0===e&&(e=512),void 0===t&&(t=512),!document)throw"Function img is only supported in the browser environment";var o=document.createElement("canvas"),a=o.getContext("2d"),i=r(n?s(n):[256*Math.random(),256*Math.random(),256*Math.random()],3),c=i[0],l=i[1],u=i[2];if(o.width=e,o.height=t,!a)throw"Canvas creation failed";a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.2)");for(var f=e/5,d=t/5,p=0;p<=4*f;p+=2*f)a.rect(p,0,f,t);for(a.fill(),a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.4)"),p=f;p<=3*f;p+=2*f)a.rect(p,0,f,t);for(a.fill(),a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.4)"),p=0;p<=4*d;p+=2*d)a.rect(0,p,e,d);for(a.fill(),a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.2)"),p=d;p<=3*d;p+=2*d)a.rect(0,p,e,d);return a.fill(),o.toDataURL()}(256,100,"rgb(255,0,0)");console.log(p,function(e){e=Number(e);var t=String(Math.random()).split(".")[1].match(new RegExp("[1-9]\\d{".concat(e-1,"}")))||["0"];return parseInt(t[0])}(3),c(),function(e,t){void 0===t&&(t=2),e=Number(e),t=Number(t);var n=String(Math.random()).split(".")[1],r="";if(1===e)r=n.slice(0,1),n=n.slice(1);else{var o=n.match(new RegExp("([1-9]\\d{".concat(e-1,"})(\\d*)")));null!==o&&(r=o[1],n=o[2])}return 0===t?r:r+"."+n.slice(0,t)}(7)),window.onload=function(){app.innerHTML='<img src="'.concat(p,'"/>')},d.ajax({method:"get",url:"/getData?id=12"}).then((function(e){console.log("ajax",e)})),fetch("/getData?id=12",{method:"post",body:JSON.stringify({a:1})}).then((function(n){return e(void 0,void 0,void 0,(function(){var e,r,o,a,i,s;return t(this,(function(t){switch(t.label){case 0:return r=(e=console).log,o=["fetch1",n],[4,n.json()];case 1:return r.apply(e,o.concat([t.sent()])),i=(a=console).log,s=["fetch1clone",n.clone()],[4,n.clone().json()];case 2:return i.apply(a,s.concat([t.sent()])),[2]}}))}))}))}));
//# sourceMappingURL=app.min.js.map
