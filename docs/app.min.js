!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))}function r(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function n(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function o(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var a={exports:{}};a.exports={filterObject:function(e,t,r){var n={};if(null==t)return Object.assign(n,e);var o=t.split(",");if(void 0===r&&(r=!0),r)for(let t of o)e[t]&&(n[t]=e[t]);else{Object.assign(n,e);for(let e of o)Reflect.deleteProperty(n,e)}return n},deepCopy:function e(t){let r="Array"===t.constructor.name?[]:{};for(let n in t)"object"==typeof t[n]&&null!==t[n]?(r[n]="Array"===t[n].constructor.name?[]:{},r[n]=e(t[n])):r[n]=t[n];return r},getQuery:function(e=window.location.href){var t={},r=e.indexOf("?");if(-1===r)return t;var n=e.slice(r+1);return""===n||n.split("&").map((e=>{let r=e.split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])})),t},queryString:function(e,t=!0){var r=[];for(let t in e)null!==e[t]&&void 0!==e[t]||(e[t]=""),r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));var n=r.join("&");return n&&t?"?"+n:n},toFixed:function(e,t){if(void 0===e)return;let r=Number(e);if(isNaN(r))throw"argument for toFixed error";if(r>Math.pow(10,21))return String(r);let n=Number(t);if(void 0===t||0==n)return String(Math.round(r));if(isNaN(n))throw"The argument of C.toFixed must be a number";if(n>20||n<0)throw"The second argument of C.toFixed must be between 0 and 20";let o=String(r),a=o.split(".");if(a.length<2){o+=".";for(let e=0;e<n;e++)o+="0";return o}let i=a[0],s=a[1];if(s.length==n)return o;if(s.length<n){for(let e=0;e<n-s.length;e++)o+="0";return o}o=i+"."+s.slice(0,n);let c=s.slice(n,n+1);if(parseInt(c,10)>=5){let e=10**n;o=(parseFloat(o)*e+1)/e,o=o.toFixed(n)}return o},formSubmit:function(e){var{document:t}=window,r=t.createElement("form"),{data:n}=e;Reflect.deleteProperty(e,"data");for(let t in e)e[t]&&(r[t]=e[t]);r.style.display="none";for(let e in n){let o=t.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",e),o.value=n[e],r.appendChild(o)}t.body.appendChild(r),r.submit()},readText:function(e){return new Promise(((t,r)=>{let n=new XMLHttpRequest;n.onload=e=>{t(n.response)},n.onerror=e=>{r(e)},n.open("GET",e,!0),n.send()}))},readJSON:function(e){return new Promise(((t,r)=>{let n=new XMLHttpRequest;n.onload=e=>{t(JSON.parse(n.response))},n.onerror=e=>{r(e)},n.open("GET",e,!0),n.send()}))},getStore:function(e){var t=localStorage.getItem(e);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}return t},setStore:function(e,t){if("object"==typeof t&&null!==t)try{t=JSON.stringify(t)}catch(e){}localStorage.setItem(e,t)},unid:function(){return parseInt(1e14*Math.random()).toString(36)+Date.now().toString(36)},colorRGB:function(e){var t=e.toLowerCase(),r=[];if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var n="#",o=1;o<4;o+=1)n+=t.slice(o,o+1).concat(t.slice(o,o+1));t=n}for(o=1;o<7;o+=2)r.push(parseInt("0x"+t.slice(o,o+2)));return r}if(/^(rgb\(|RGB\()[\s\S]+\)/.test(t))return(r=t.replace(/( |\(|\)|rgb|RGB)+/g,"").split(",")).map(Number)},Base64:new function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(r){var n,o,a,i,s,c,l,u="",f=0;for(r=t(r);f<r.length;)i=(n=r.charCodeAt(f++))>>2,s=(3&n)<<4|(o=r.charCodeAt(f++))>>4,c=(15&o)<<2|(a=r.charCodeAt(f++))>>6,l=63&a,isNaN(o)?c=l=64:isNaN(a)&&(l=64),u=u+e.charAt(i)+e.charAt(s)+e.charAt(c)+e.charAt(l);return u},this.decode=function(t){var n,o,a,i,s,c,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)n=e.indexOf(t.charAt(u++))<<2|(i=e.indexOf(t.charAt(u++)))>>4,o=(15&i)<<4|(s=e.indexOf(t.charAt(u++)))>>2,a=(3&s)<<6|(c=e.indexOf(t.charAt(u++))),l+=String.fromCharCode(n),64!=s&&(l+=String.fromCharCode(o)),64!=c&&(l+=String.fromCharCode(a));return r(l)};var t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},r=function(e){for(var t="",r=0,n=0,o=0,a=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),a=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),r+=3);return t}}};var i=a.exports;var s=i.unid;var c={wait:500};function l(t){var r=c.wait,a=window.fetch;window.fetch=function(){console.log("arguments",arguments);var s=arguments[0],c=arguments[1]||{method:"get",body:null},l=c.method,u=c.body,f=s.split("?")[0],d=i.getQuery(s);l=l.toUpperCase();var p=function(n){var o=t[n];if(o.type=(o.type||"get").toUpperCase(),n===f&&l===o.type){if(u)try{u=JSON.parse(u)}catch(e){u=i.getQuery(u)}var a=o.response({params:d,type:l,url:f,data:u}),c={ok:!0,status:200,statusText:"OK",url:s,type:"basic",redirected:!1,headers:new Headers,text:function(){return new Promise((function(e){e(a)}))},json:function(){return new Promise((function(e){e(a)}))},clone:function(){return e({},c)}};return{value:new Promise((function(e){setTimeout((function(){e(c)}),r||0)}))}}};for(var h in t){var g=p(h);if("object"==typeof g)return g.value}return a.apply(void 0,o([],n(arguments),!1))},XMLHttpRequest.prototype.serviceOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var e=n(arguments,2),r=e[0],a=e[1],s=a.split("?")[0],c=i.getQuery(a);for(var l in r=r.toUpperCase(),t){var u=t[l];if(u.type=(u.type||"get").toUpperCase(),l===s&&r===u.type){Object.defineProperty(this,"__SIMULATE_SERVICE_OBJECT__",{configurable:!0,value:{isService:!0,itemFunc:u.response,type:r,pathname:s,params:c}});break}}this.serviceOpen.apply(this,o([],n(arguments),!1))},XMLHttpRequest.prototype.serviceSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){var e=this,t=this.__SIMULATE_SERVICE_OBJECT__;if(t){var a=arguments[0],s=t.params,c=t.pathname,l=t.type,u=t.itemFunc;if(a)try{a=JSON.parse(a)}catch(e){a=i.getQuery(a)}var f=u({params:s,type:l,url:c,data:a});Object.defineProperty(this,"responseText",{configurable:!0,value:f}),Object.defineProperty(this,"responseXML",{configurable:!0,value:f}),Object.defineProperty(this,"response",{configurable:!0,value:f}),Object.defineProperty(this,"status",{configurable:!0,value:200}),Object.defineProperty(this,"statusText",{configurable:!0,value:"OK"}),setTimeout((function(){e.dispatchEvent(new Event("load"))}),r||0)}else this.serviceSend.apply(this,o([],n(arguments),!1))}}l.getConfig=function(){return e({},c)},l.setConfig=function(e){Object.assign(c,e)};var u={exports:{}};!function(e,t){e.exports=function(){function e(e){let t=[];if(e instanceof Object)for(let r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}return{ajax:function(t){return new Promise((function(r,n){var o=new XMLHttpRequest;o.addEventListener("load",(e=>{if(t.getResponse){var a={},i=o.getAllResponseHeaders().split("\r\n");for(let e of i){let t=e.split(": ");t[0]&&(a[t[0]]=t[1])}t.getResponse(a)}var{status:s}=o;200==s?r(o.response):n({status:s,result:o,error:e})})),o.addEventListener("error",(e=>{n({status:o.status,result:o,error:e})})),o.addEventListener("timeout",(e=>{n({status:o.status,result:o,error:e})})),t.uploadProgress&&(o.upload.addEventListener("loadstart",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("progress",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("load",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("loadend",(e=>{t.uploadProgress(e)})),o.upload.addEventListener("error",(e=>{t.uploadProgress(e)}))),t.downloadProgress&&(o.addEventListener("loadstart",(e=>{t.downloadProgress(e)})),o.addEventListener("progress",(e=>{t.downloadProgress(e)})),o.addEventListener("loadend",(e=>{t.downloadProgress(e)})));var a=t.method,{url:i,params:s={},data:c={},headers:l,timeout:u,responseType:f,withCredentials:d}=t,p=!1;a=a?a.toUpperCase():"GET",new Set(["GET","DELETE","HEAD","OPTIONS","TRACE"]).has(a)&&(p=!0),i+=function(t,r){if(!r)return"";var n=r instanceof Object?e(r):r;return-1!==t.indexOf("?")?"&"+n:"?"+n}(i,s),o.open(a,i,!0),void 0!==d&&(o.withCredentials=d),o.responseType=f||"json";for(let e in l)o.setRequestHeader(e,l[e]),e=e.toLowerCase();l&&l["content-type"]||"FormData"==c.constructor.name?l&&l["content-type"]&&-1!==l["content-type"].indexOf("application/json")&&c instanceof Object&&(c=JSON.stringify(c)):o.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8"),o.timeout=u||6e4,o.send(p?null:function(t){return t?"string"==typeof t||t instanceof FormData?t:e(t):null}(c))}))}}}()}(u);var f=u.exports;l({"/getData":{type:"post",response:function(e){return console.log("simulate",e),{code:200}}}});var d=function(e,t,r){if(void 0===e&&(e=512),void 0===t&&(t=512),!document)throw"Function img is only supported in the browser environment";var o=document.createElement("canvas"),a=o.getContext("2d"),s=n(r?i.colorRGB(r):[256*Math.random(),256*Math.random(),256*Math.random()],3),c=s[0],l=s[1],u=s[2];if(o.width=e,o.height=t,!a)throw"Canvas creation failed";a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.2)");for(var f=e/5,d=t/5,p=0;p<=4*f;p+=2*f)a.rect(p,0,f,t);for(a.fill(),a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.4)"),p=f;p<=3*f;p+=2*f)a.rect(p,0,f,t);for(a.fill(),a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.4)"),p=0;p<=4*d;p+=2*d)a.rect(0,p,e,d);for(a.fill(),a.beginPath(),a.fillStyle="rgba(".concat(c,",").concat(l,",").concat(u,",0.2)"),p=d;p<=3*d;p+=2*d)a.rect(0,p,e,d);return a.fill(),o.toDataURL()}(256,100,"rgb(255,0,0)");console.log(d,function(e){e=Number(e);var t=String(Math.random()).split(".")[1].match(new RegExp("[1-9]\\d{".concat(e-1,"}")))||["0"];return parseInt(t[0])}(3),s(),function(e,t){void 0===t&&(t=2),e=Number(e),t=Number(t);var r=String(Math.random()).split(".")[1],n="";if(1===e)n=r.slice(0,1),r=r.slice(1);else{var o=r.match(new RegExp("([1-9]\\d{".concat(e-1,"})(\\d*)")));null!==o&&(n=o[1],r=o[2])}return 0===t?n:n+"."+r.slice(0,t)}(7)),window.onload=function(){app.innerHTML='<img src="'.concat(d,'"/>')},f.ajax({method:"get",url:"/getData?id=12"}).then((function(e){console.log("ajax",e)})),fetch("/getData?id=12",{method:"post",body:JSON.stringify({a:1})}).then((function(e){return t(void 0,void 0,void 0,(function(){var t,n,o,a,i,s;return r(this,(function(r){switch(r.label){case 0:return n=(t=console).log,o=["fetch1",e],[4,e.json()];case 1:return n.apply(t,o.concat([r.sent()])),i=(a=console).log,s=["fetch1clone",e.clone()],[4,e.clone().json()];case 2:return i.apply(a,s.concat([r.sent()])),[2]}}))}))}))}));
//# sourceMappingURL=app.min.js.map
