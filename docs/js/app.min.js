!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e=window.location.href){let t={},n=e.indexOf("?");if(-1===n)return t;let o=e.indexOf("#");(-1===o||n>o)&&(o=void 0);let r=e.slice(n+1,o);if(""===r)return t;let s=r.split("&");for(let e of s){if(!e)continue;let n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return t}const t=function(){return Math.floor(1e14*Math.random()).toString(36)+Date.now().toString(36)};const n={wait:500};function o(t){const{wait:o}=n;let r=window.fetch;window.fetch=function(){let n=arguments[0],s=arguments[1]||{method:"get",body:null},{method:a,body:i}=s,l=n.split("?")[0],c=e(n);a=a.toUpperCase();for(let r in t){let s=t[r];if(s.type=(s.type||"get").toUpperCase(),r===l&&a===s.type){if(i)try{i=JSON.parse(i)}catch(t){i=e(i)}let t=s.response({params:c,type:a,url:l,data:i}),r={ok:!0,status:200,statusText:"OK",url:n,type:"basic",redirected:!1,headers:new Headers,text:()=>new Promise((e=>{e(t)})),json:()=>new Promise((e=>{e(t)})),clone:()=>({...r})};return new Promise((e=>{setTimeout((()=>{e(r)}),o||0)}))}}return r(...arguments)},XMLHttpRequest.prototype.serviceOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var[n,o]=arguments,r=o.split("?")[0],s=e(o);n=n.toUpperCase();for(let e in t){let o=t[e];if(o.type=(o.type||"get").toUpperCase(),e===r&&n===o.type){Object.defineProperty(this,"__SIMULATE_SERVICE_OBJECT__",{configurable:!0,value:{isService:!0,itemFunc:o.response,type:n,pathname:r,params:s}});break}}this.serviceOpen(...arguments)},XMLHttpRequest.prototype.serviceSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){let t=this.__SIMULATE_SERVICE_OBJECT__;if(t){var n=arguments[0],{params:r,pathname:s,type:a,itemFunc:i}=t;if(n)try{n=JSON.parse(n)}catch(t){n=e(n)}var l=i({params:r,type:a,url:s,data:n});Object.defineProperty(this,"responseText",{configurable:!0,value:l}),Object.defineProperty(this,"responseXML",{configurable:!0,value:l}),Object.defineProperty(this,"response",{configurable:!0,value:l}),Object.defineProperty(this,"status",{configurable:!0,value:200}),Object.defineProperty(this,"statusText",{configurable:!0,value:"OK"}),setTimeout((()=>{this.dispatchEvent(new Event("load"))}),o||0)}else this.serviceSend(...arguments)}}function r(e,t=!1){let n=[];for(let t in e)null!==e[t]&&void 0!==e[t]||(e[t]=""),n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));let o=n.join("&");return o&&t?"?"+o:o}var s,a;o.getConfig=function(){return{...n}},o.setConfig=function(e){Object.assign(n,e)},function(e){e.DF="",e.AB="arraybuffer",e.Blob="blob",e.DOC="document",e.JSON="json",e.TXT="text"}(s||(s={})),function(e){e.json="application/json;charset=UTF-8",e.urlencoded="application/x-www-form-urlencoded;charset=UTF-8",e.formData="multipart/form-data",e.text="text/plain;charset=UTF-8",e.xml="application/xml;charset=UTF-8",e.stream="application/octet-stream"}(a||(a={}));const i=new Set(["[object String]","[object FormData]","[object Blob]","[object ArrayBuffer]","[object URLSearchParams]","[object Null]","[object Undefined]"]),l=new Set(["GET","DELETE","HEAD","OPTIONS","TRACE"]);function c(e,t){if(!t)return"";let n="string"==typeof t?t:r(t);return n?-1!==e.indexOf("?")?"&"+n:"?"+n:""}function d(e,t,n,o){return l.has(o)?null:(i.has(Object.prototype.toString.call(e))||(t?t.includes("application/json")?e=JSON.stringify(e):t.includes("application/x-www-form-urlencoded")&&(e=r(e)):(n.setRequestHeader("Content-Type",a.json),e=JSON.stringify(e))),e)}o({"/getData":{type:"post",response:e=>(console.log("simulate",e),{code:200})}});let p=function(e=512,t=512,n){if(!document)throw"Function img is only supported in the browser environment";let o=document.createElement("canvas"),r=o.getContext("2d"),s=n?function(e){let t=e.toLowerCase(),n=[];if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){let e="#";for(let n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}for(let e=1;e<7;e+=2)n.push(parseInt("0x"+t.slice(e,e+2)));return n}if(/^(rgb\(|RGB\()[\s\S]+\)/.test(t))return n=t.replace(/( |\(|\)|rgb|RGB)+/g,"").split(","),n.map(Number)}(n):[256*Math.random(),256*Math.random(),256*Math.random()],[a,i,l]=s;if(o.width=e,o.height=t,!r)throw"Canvas creation failed";r.beginPath(),r.fillStyle=`rgba(${a},${i},${l},0.2)`;let c=e/5,d=t/5;for(let e=0;e<=4*c;e+=2*c)r.rect(e,0,c,t);r.fill(),r.beginPath(),r.fillStyle=`rgba(${a},${i},${l},0.4)`;for(let e=c;e<=3*c;e+=2*c)r.rect(e,0,c,t);r.fill(),r.beginPath(),r.fillStyle=`rgba(${a},${i},${l},0.4)`;for(let t=0;t<=4*d;t+=2*d)r.rect(0,t,e,d);r.fill(),r.beginPath(),r.fillStyle=`rgba(${a},${i},${l},0.2)`;for(let t=d;t<=3*d;t+=2*d)r.rect(0,t,e,d);return r.fill(),o.toDataURL()}(256,100,"rgb(255,0,0)");console.log(p,function(e){e=Number(e);let t=String(Math.random()).split(".")[1].match(new RegExp(`[1-9]\\d{${e-1}}`))||["0"];return parseInt(t[0])}(3),t(),function(e,t=2){e=Number(e),t=Number(t);let n=String(Math.random()).split(".")[1],o="",r="";if(1===e)o=n.slice(0,1),n=n.slice(1);else{let t=n.match(new RegExp(`([1-9]\\d{${e-1}})(\\d*)`));null!==t&&(o=t[1],n=t[2])}return r=0===t?o:o+"."+n.slice(0,t),r}(7)),window.onload=()=>{app.innerHTML=`<img src="${p}"/>`},function(e){return new Promise((function(t,n){const o=new XMLHttpRequest;o.addEventListener("load",(r=>{const s=function(e){const t={};if(null!==e){const n=e.trim().split(/[\r\n]+/);for(const e of n){const n=e.split(": ");t[n[0]]=n[1]}}return t}(o.getAllResponseHeaders()),a={request:o,config:e,headers:s,response:o.response,status:o.status,statusText:o.statusText};var i;(i=o.status)>=200&&i<=299?t(a):n(a)})),o.addEventListener("error",(e=>{n(e)})),o.addEventListener("timeout",(e=>{n(e)})),e.uploadProgress&&(o.upload.addEventListener("loadstart",(t=>{e.uploadProgress(t)})),o.upload.addEventListener("progress",(t=>{e.uploadProgress(t)})),o.upload.addEventListener("load",(t=>{e.uploadProgress(t)})),o.upload.addEventListener("loadend",(t=>{e.uploadProgress(t)})),o.upload.addEventListener("error",(t=>{e.uploadProgress(t)}))),e.downloadProgress&&(o.addEventListener("loadstart",(t=>{e.downloadProgress(t)})),o.addEventListener("progress",(t=>{e.downloadProgress(t)})),o.addEventListener("loadend",(t=>{e.downloadProgress(t)})));let{method:r,url:a,params:i,data:l,headers:p,timeout:u,responseType:f,withCredentials:g}=e;if(r=r?r.toUpperCase():"GET",i&&(a+=c(a,i)),o.open(r,a,!0),void 0!==g&&(o.withCredentials=g),o.responseType=f||s.JSON,p){let e="";for(const t in p){let n=p[t];n=null==n?"":String(n),o.setRequestHeader(t,n),"content-type"===t.toLowerCase()&&(e=n)}l=d(l,e,o,r)}else l=d(l,"",o,r);o.timeout=u||0,o.send(l)}))}({url:"/getData?id=12"}).then((e=>{console.log("ajax",e)})),fetch("/getData?id=12",{method:"post",body:JSON.stringify({a:1})}).then((async e=>{console.log("fetch1",e,await e.json())})),fetch("/getData?id=13").then((async e=>{console.log("fetch2",e,await e.json())}))}));
//# sourceMappingURL=app.min.js.map
