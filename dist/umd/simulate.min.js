!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Simulate=t()}(this,(function(){"use strict";function e(e=window.location.href){let t={},n=e.indexOf("?");if(-1===n)return t;let i=e.indexOf("#");(-1===i||n>i)&&(i=void 0);let r=e.slice(n+1,i);if(""===r)return t;let o=r.split("&");for(let e of o){if(!e)continue;let n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return t}const t={wait:500};function n(n){const{wait:i}=t;let r=window.fetch;window.fetch=function(){let t=arguments[0],o=arguments[1]||{method:"get",body:null},{method:s,body:l}=o,a=t.split("?")[0],p=e(t);s=s.toUpperCase();for(let r in n){let o=n[r];if(o.type=(o.type||"get").toUpperCase(),r===a&&s===o.type){if(l)try{l=JSON.parse(l)}catch(t){l=e(l)}let n=o.response({params:p,type:s,url:a,data:l}),r={ok:!0,status:200,statusText:"OK",url:t,type:"basic",redirected:!1,headers:new Headers,text:()=>new Promise((e=>{e(n)})),json:()=>new Promise((e=>{e(n)})),clone:()=>({...r})};return new Promise((e=>{setTimeout((()=>{e(r)}),i||0)}))}}return r(...arguments)},XMLHttpRequest.prototype.serviceOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var[t,i]=arguments,r=i.split("?")[0],o=e(i);t=t.toUpperCase();for(let e in n){let i=n[e];if(i.type=(i.type||"get").toUpperCase(),e===r&&t===i.type){Object.defineProperty(this,"__SIMULATE_SERVICE_OBJECT__",{configurable:!0,value:{isService:!0,itemFunc:i.response,type:t,pathname:r,params:o}});break}}this.serviceOpen(...arguments)},XMLHttpRequest.prototype.serviceSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){let t=this.__SIMULATE_SERVICE_OBJECT__;if(t){var n=arguments[0],{params:r,pathname:o,type:s,itemFunc:l}=t;if(n)try{n=JSON.parse(n)}catch(t){n=e(n)}var a=l({params:r,type:s,url:o,data:n});Object.defineProperty(this,"responseText",{configurable:!0,value:a}),Object.defineProperty(this,"responseXML",{configurable:!0,value:a}),Object.defineProperty(this,"response",{configurable:!0,value:a}),Object.defineProperty(this,"status",{configurable:!0,value:200}),Object.defineProperty(this,"statusText",{configurable:!0,value:"OK"}),setTimeout((()=>{this.dispatchEvent(new Event("load"))}),i||0)}else this.serviceSend(...arguments)}}return n.getConfig=function(){return{...t}},n.setConfig=function(e){Object.assign(t,e)},Object.assign(n,{fixed:function(e,t=2){e=Number(e),t=Number(t);let n=String(Math.random()).split(".")[1],i="",r="";if(1===e)i=n.slice(0,1),n=n.slice(1);else{let t=n.match(new RegExp(`([1-9]\\d{${e-1}})(\\d*)`));null!==t&&(i=t[1],n=t[2])}return r=0===t?i:i+"."+n.slice(0,t),r},int:function(e){e=Number(e);let t=String(Math.random()).split(".")[1].match(new RegExp(`[1-9]\\d{${e-1}}`))||["0"];return parseInt(t[0])},img:function(e=512,t=512,n){if(!document)throw"Function img is only supported in the browser environment";let i=document.createElement("canvas"),r=i.getContext("2d"),o=n?function(e){let t=e.toLowerCase(),n=[];if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){let e="#";for(let n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}for(let e=1;e<7;e+=2)n.push(parseInt("0x"+t.slice(e,e+2)));return n}if(/^(rgb\(|RGB\()[\s\S]+\)/.test(t))return n=t.replace(/( |\(|\)|rgb|RGB)+/g,"").split(","),n.map(Number)}(n):[256*Math.random(),256*Math.random(),256*Math.random()],[s,l,a]=o;if(i.width=e,i.height=t,!r)throw"Canvas creation failed";r.beginPath(),r.fillStyle=`rgba(${s},${l},${a},0.2)`;let p=e/5,f=t/5;for(let e=0;e<=4*p;e+=2*p)r.rect(e,0,p,t);r.fill(),r.beginPath(),r.fillStyle=`rgba(${s},${l},${a},0.4)`;for(let e=p;e<=3*p;e+=2*p)r.rect(e,0,p,t);r.fill(),r.beginPath(),r.fillStyle=`rgba(${s},${l},${a},0.4)`;for(let t=0;t<=4*f;t+=2*f)r.rect(0,t,e,f);r.fill(),r.beginPath(),r.fillStyle=`rgba(${s},${l},${a},0.2)`;for(let t=f;t<=3*f;t+=2*f)r.rect(0,t,e,f);return r.fill(),i.toDataURL()}}),n}));
//# sourceMappingURL=simulate.min.js.map
